SHOW DATABASES;
CREATE DATABASE IF NOT EXISTS `Part shop`;
SHOW DATABASES;
USE `Part shop`;

CREATE TABLE IF NOT EXISTS Customer(
	custId VARCHAR(6) NOT NULL,
	custName VARCHAR(45) NOT NULL DEFAULT 'Unknown',
	custAddress TEXT,
	contactNo VARCHAR(18) NOT NULL,
	CONSTRAINT PRIMARY KEY (custId)

);
SHOW TABLES;
DESC Customer;

INSERT INTO Customer VALUES
('C001','Nimal','Colombo','+9411-24'),
('C002','Kamal','Matugama','+9434-7856');

SELECT * FROM Customer;

CREATE TABLE IF NOT EXISTS Employee(
	empId VARCHAR(6) NOT NULL,
	empName VARCHAR(35) NOT NULL,
	empAddress TEXT,
	empSalary DOUBLE DEFAULT '0.00',
	contact VARCHAR(18) NOT NULL,
	CONSTRAINT PRIMARY KEY (empId)
);
SHOW TABLES;
DESC Employee;

INSERT INTO Employee VALUES
('E001','Jhone','Colombo',45000,'+9411-456'),
('E002','Jonny','Panadura',56000,'+9434-561');

SELECT * FROM Employee;

CREATE TABLE IF NOT EXISTS `Order`(
	orderId VARCHAR(6) NOT NULL,
	orderDate DATE,
	custId VARCHAR(6) NOT NULL,
	empId VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (orderId),
	CONSTRAINT FOREIGN KEY (custId) REFERENCES Customer (custId),
	CONSTRAINT FOREIGN KEY (empId) REFERENCES Employee (empId)
	ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC `Order`;

INSERT INTO `Order` VALUES
('O-001','2021-09-01','C001','E001'),
('O-002','2021-09-02','C002','E002');

SELECT * FROM `Order`;

CREATE TABLE IF NOT EXISTS Part(
	partCode VARCHAR(6) NOT NULL,
	partBrand VARCHAR(35) NOT NULL,
	Description VARCHAR(45) NOT NULL,
	UnitPrice DECIMAL(25,2) DEFAULT '0.00',
	qtyOnHand INT(5),
	catergory VARCHAR(25) NOT NULL,
	CONSTRAINT PRIMARY KEY (partCode)
);
SHOW TABLES;
DESC Part;

INSERT INTO Part VALUES
('P001','Asus','Mother_board',25000,100,'g41'),
('P002','Kingston','Ram',5000,80,'DDR4');

SELECT * FROM Part;

CREATE TABLE IF NOT EXISTS `Order detail`(
	partCode VARCHAR(6) NOT NULL,
	orderId VARCHAR(6) NOT NULL,
	UnitPrice DECIMAL(25,2) DEFAULT '0.00',
	qty INT(5) NOT NULL,
	Discount DECIMAL(6,2),
	total DOUBLE,
	CONSTRAINT FOREIGN KEY (partCode) REFERENCES Part (partCode),
	CONSTRAINT FOREIGN KEY (orderId) REFERENCES `Order` (orderId)
	ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC `Order detail`;

INSERT INTO `Order detail` VALUES
('P001','O-001',25000,1,1000,24000),
('P002','O-002',5000,2,500,9500);

SELECT * FROM `Order detail`;

CREATE TABLE IF NOT EXISTS Supplier(
	supId VARCHAR(6) NOT NULL,
	supName VARCHAR(45) NOT NULL,
	address TEXT,
	contact VARCHAR(18) NOT NULL,
	CONSTRAINT PRIMARY KEY (supId)
);
SHOW TABLES;
DESC Supplier;

INSERT INTO Supplier VALUES
('S001','Saman','Colombo','+9411-456'),
('S002','Namal','Horana','+9434-789');

SELECT * FROM Supplier;

CREATE TABLE IF NOT EXISTS Supplier_part(
	supId VARCHAR(6) NOT NULL,
	partCode VARCHAR(6) NOT NULL,
	CONSTRAINT FOREIGN KEY (supId) REFERENCES Supplier (supId),
	CONSTRAINT FOREIGN KEY (partCode) REFERENCES Part (partCode)
	ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC Supplier_part;

INSERT INTO Supplier_part VALUES
('S001','P001'),
('S002','P002');

SELECT * FROM Supplier_part;

CREATE TABLE IF NOT EXISTS `Return`(
	returnId VARCHAR(6),
	returnDate DATE,
	partCode VARCHAR(6) NOT NULL,
	warrenty_Card VARCHAR(25),
	CONSTRAINT PRIMARY KEY (returnId),
	CONSTRAINT FOREIGN KEY (partCode) REFERENCES Part (partCode)
	ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC `Return`;

INSERT INTO `Return` VALUES
('R001','2021-09-01','P001','2Years'),
('R002','2021-09-02','P002','6Months');

SELECT * FROM `Return`;

CREATE TABLE IF NOT EXISTS Payment(
	payId VARCHAR(6),
	total DECIMAL(6,2) DEFAULT '0.00',
	orderId VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (payId),
	CONSTRAINT FOREIGN KEY (orderId) REFERENCES `Order` (orderId)
	ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW TABLES;
DESC Payment;

